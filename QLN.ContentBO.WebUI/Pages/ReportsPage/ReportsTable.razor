@typeparam TPost
@using QLN.ContentBO.WebUI.Models
@using QLN.ContentBO.WebUI.Components.TableSkeleton
@using QLN.ContentBO.WebUI.Components.EmptyCard
@using MudBlazor

@if (IsLoading)
{
    <TableSkeleton Rows="10" />
}
else if (Posts == null || Posts.Count == 0)
{
      <div class="empty-card-wrapper">
        <EmptyCard Title="No Reports found" Subtitle="Please check back later or explore other categories." />
    </div>
}
else
{
    <MudTable Items="Posts" Hover="true" Class="custom-table">
        <HeaderContent>
            <MudTh class="header-cell">Number</MudTh>
            <MudTh class="header-cell">Post</MudTh>
            <MudTh class="header-cell">Comment</MudTh>
            <MudTh class="header-cell">Username</MudTh>
            <MudTh class="header-cell">Comment Date</MudTh>
            <MudTh class="header-cell">Reporter</MudTh>
            <MudTh class="header-cell">Report Date</MudTh>
            <MudTh class="header-cell">Actions</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="Number" Class="number-cell">@context.Number</MudTd>
            <MudTd DataLabel="Post">
                <MudLink Href="#" Class="post-title">@context.Post</MudLink>
            </MudTd>
            <MudTd DataLabel="Comment">@(!string.IsNullOrWhiteSpace(context.Comment) ? context.Comment : "--")</MudTd>
            <MudTd DataLabel="Username">@(!string.IsNullOrWhiteSpace(context.UserName) ? context.UserName : "--")</MudTd>
            <MudTd DataLabel="Comment Date">@((context.CommentDate.HasValue) ? context.CommentDate.Value.ToString("dd-MM-yyyy") : "--")</MudTd>
            <MudTd DataLabel="Reporter">@(!string.IsNullOrWhiteSpace(context.Reporter) ? context.Reporter : "--")</MudTd>
            <MudTd DataLabel="Report Date">@context.ReportDate.ToString("dd-MM-yyyy")</MudTd>

            <MudTd>
            <MudMenu Icon="@Icons.Material.Filled.MoreVert" Color="Color.Default" Dense="true">
                   <MudMenuItem OnClick="@(async () => await OnIgnore.InvokeAsync(context.Id))">
                <img src="/qln-images/Ignore_icon.svg" class="menu-icon-style" alt="Ignore" />
                <span class="menu-text">Ignore</span>
            </MudMenuItem>
            <MudMenuItem OnClick="@(async () => await OnDelete.InvokeAsync(context.Id))" Class="mud-error-text">
                <img src="/qln-images/red_delete_icon.svg" class="menu-icon-style" alt="Delete" />
                <span class="menu-text" style="color: #F04438;">Delete</span>
            </MudMenuItem>

                </MudMenu>
            </MudTd>
        </RowTemplate>
    </MudTable>
}

@code {
    [Parameter] public List<ReportDto> Posts { get; set; } = new();
    [Parameter] public EventCallback<Guid> OnIgnore { get; set; }
    [Parameter] public EventCallback<Guid> OnDelete { get; set; }
    [Parameter] public bool IsLoading { get; set; }
}


<style>
     /* Table header style */
.custom-table .header-cell {
    background-color: #FAFAFA;
    font-weight: 600;
    font-family: 'Public Sans', sans-serif;
}

/* Centered bold number column */
.custom-table .number-cell {
    text-align: center;
    font-weight: bold;
}
/* Post title styling */
.custom-table .post-title {
    color: var(--color-background-grey) !important;
    text-decoration: none;
    font-size: 14px;
    font-weight: 400;
}

.custom-table .post-title:hover {
    color: #1976d2 !important; /* Material blue */
    text-decoration: underline;
}
</style>