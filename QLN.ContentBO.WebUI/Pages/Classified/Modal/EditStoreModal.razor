@inherits EditStoreModalBase
@using MudBlazor

<MudDialog MaxWidth="MaxWidth.Small" FullWidth="true">
    <DialogContent>
        <div class="classified-modal">

            <!-- Icon -->
            <div class="d-flex justify-center">
                <img src="/qln-images/plus_icon.svg" alt="plus" />
            </div>

            <!-- Title -->
            <div class="d-flex justify-center">
                <MudText Typo="Typo.h6" Align="Align.Center" Class="classified-add-title">
                    @Title
                </MudText>
            </div>
            <div class="mx-auto">
            <MudTextField  Class="classified-text-field no-underline" T="string" Placeholder="Featured Category Title*"
                      @bind-Value="featuredCategoryTitle"   />
            </div>

            <!-- Category -->
            <div class="mx-auto">
                <MudSelect T="Guid?" Label="Store Name"
                           Value="SelectedCategoryId"
                           Class="classified-field no-underline"
                           Required="true"
                           RequiredError="Store Name is required"
                           ValueChanged="OnCategoryChanged"
                           ToStringFunc="@(id => Listings.FirstOrDefault(c => c.Id == id)?.CompanyName ?? string.Empty)">
                    @if (IsLoadingCategories)
                    {
                        <MudSelectItem T="Guid?" Value=null Disabled="true">
                            <MudProgressCircular Size="Size.Small" Indeterminate="true" Color="Color.Primary" Class="mr-2" />
                            Loading Stores...
                        </MudSelectItem>
                    }
                    else
                    {
                        <MudSelectItem T="Guid?" Value=null Disabled="true">Choose</MudSelectItem>
                        @foreach (var category in Listings)
                        {
                            <MudSelectItem T="Guid?" Value="@category.Id">@category.CompanyName</MudSelectItem>
                        }
                    }
                </MudSelect>
            </div>
             <div class="mx-auto" style="width: 330px;">
                <MudDateRangePicker Class="classified-datepicker-field no-underline" Style="border: 1px solid #D0D5DD; border-radius: 6px; padding: 10px;" @bind-DateRange="dateRange" Required="true" 
                               MinDate="@DateTime.Today"DisplayMonths="1"/>
            </div> 

            <!-- Image Upload -->
            <div class="mx-auto">
              <MudFileUpload T="IBrowserFile" Accept="image/*" FilesChanged="OnLogoFileSelected" MaxFileSize="10485760">
                <ActivatorContent>
                <MudPaper Elevation="0" Class="classified-image-container mt-2">
                    @if (!string.IsNullOrEmpty(ImagePreviewUrl))
                    {
                        <img src="@ImagePreviewUrl" style="max-width: 100%; max-height: 200px;" />
                       
                    }
                    else
                    {
                        <img src="/qln-images/upload_icon.svg" alt="upload" />
                        <MudButton Variant="Variant.Text">
                            Upload
                        </MudButton>
                        <input type="file" @ref="fileInput" style="display: none;" accept="image/*" />
                    }
                </MudPaper>
                    </ActivatorContent>

                </MudFileUpload>
                <MudText Typo="Typo.caption" Align="Align.Center" Class="mt-1">Recommended image size: 330 x 200 pixels</MudText>
            </div>

            <!-- Footer Buttons -->
            <div class=" classified-button-wrapper mx-auto mt-2">
                <MudButton Color="Color.Primary" Variant="Variant.Filled" OnClick="SaveAsync" Disabled="@(!IsFormValid())" Class="classified-button">
                    Edit
                </MudButton>
                <MudButton Variant="Variant.Outlined" Color="Color.Inherit" OnClick="Close" Class="classified-button mt-2">
                    Close
                </MudButton>

            </div>

        </div>
    </DialogContent>
</MudDialog>



<style>
    .no-underline .mud-input-underline::before,
    .no-underline .mud-input-underline::after {
        border-bottom: none !important;
    }

    .classified-field .mud-input-label {
        color: #A1A1A1 !important;
    }

</style>