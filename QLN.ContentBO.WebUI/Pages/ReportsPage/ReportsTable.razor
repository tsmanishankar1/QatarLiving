@typeparam TPost
@using QLN.ContentBO.WebUI.Extensions
@using QLN.ContentBO.WebUI.Models
@using QLN.ContentBO.WebUI.Components.TableSkeleton
@using QLN.ContentBO.WebUI.Components.EmptyCard
@using QLN.ContentBO.WebUI.Components.ConfirmationDialog
@using MudBlazor
@inherits ReportsTableBase
@if (IsLoading)
{
    <TableSkeleton Rows="10" />
}
else if (Posts == null || Posts.Count == 0)
{
    <div class="empty-card-wrapper">
        <EmptyCard Title="No Reports found" Subtitle="Please check back later or explore other categories." />
    </div>
}
else
{
    <MudTable Items="Posts" Hover="true" Class="custom-table">
        <HeaderContent>
            <MudTh class="header-cell">Number</MudTh>
            <MudTh class="header-cell">Post</MudTh>
            @if (Type != "community-posts")
            {
                <MudTh class="header-cell">Comment</MudTh>
                <MudTh class="header-cell">Comment Date</MudTh>
            }
            else
            {
                <MudTh class="header-cell">Post Date</MudTh>
            }
            <MudTh class="header-cell">Username</MudTh>
            <MudTh class="header-cell">Reporter</MudTh>
            <MudTh class="header-cell">Report Date</MudTh>
            <MudTh class="header-cell">Actions</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="Number" Class="number-cell">@context.Number</MudTd>
            <MudTd DataLabel="Post">
                <MudLink Href="@($"{NavigationPath.Value.ContentPostDetail}{context.Slug}")" Target="_blank" Class="post-title">@context.Post</MudLink>
            </MudTd>

            @if (Type != "community-posts")
            {
                <MudTd DataLabel="Comment" title="@(string.IsNullOrWhiteSpace(context.Comment) ? "-" : context.Comment)" Class="truncate-text">@(!string.IsNullOrWhiteSpace(context.Comment) ? context.Comment : "-")</MudTd>
                <MudTd DataLabel="Comment Date">@((context.CommentDate.HasValue) ? context.CommentDate.Value.ToQatarTime("dd-MM-yyyy") : "-")</MudTd>
            }
            else
            {
                <MudTd DataLabel="Post Date">@((context.PostDate.HasValue) ? context.PostDate.Value.ToQatarTime("dd-MM-yyyy") : "-")</MudTd>
            }

            <MudTd DataLabel="Username">@(!string.IsNullOrWhiteSpace(context.UserName) ? context.UserName : "-")</MudTd>
            <MudTd DataLabel="Reporter">@(!string.IsNullOrWhiteSpace(context.Reporter) ? context.Reporter : "-")</MudTd>
            <MudTd DataLabel="Report Date"> @(context.ReportDate.HasValue ? context.ReportDate.Value.ToQatarTime("dd-MM-yyyy") : "-")</MudTd>

            <MudTd>
                <MudMenu Icon="@Icons.Material.Filled.MoreVert" Color="Color.Default" Dense="true">
                    <MudMenuItem OnClick="@(async () => await ShowConfirmationDialog(context.Id, true))">
                        <img src="/qln-images/Ignore_icon.svg" class="menu-icon-style" alt="Ignore" />
                        <span class="menu-text">Ignore</span>
                    </MudMenuItem>
                    <MudMenuItem OnClick="@(async () => await ShowConfirmationDialog(context.Id, false))" Class="mud-error-text">
                        <img src="/qln-images/red_delete_icon.svg" class="menu-icon-style" alt="Delete" />
                        <span class="menu-text" style="color: #F04438;">Delete</span>
                    </MudMenuItem>
                </MudMenu>
            </MudTd>
        </RowTemplate>
    </MudTable>

}

<style>
    /* Table header style */
    .custom-table .header-cell {
        background-color: #FAFAFA;
        font-weight: 600;
        font-family: 'Public Sans', sans-serif;
    }

    /* Centered bold number column */
    .custom-table .number-cell {
        text-align: center;
        font-weight: bold;
    }
    /* Post title styling */
    .custom-table .post-title {
        color: var(--color-background-grey) !important;
        text-decoration: none;
        font-size: 14px;
        font-weight: 400;
    }

        .custom-table .post-title:hover {
            color: #1976d2 !important; /* Material blue */
            text-decoration: underline;
        }

    .truncate-text {
        max-width: 200px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }
</style>