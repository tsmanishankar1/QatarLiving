@using MudBlazor
@inherits SearchBarSectionBase
@using QLN.Web.Shared.Components.NewCustomSelect

<MudPaper Elevation="0" Class="py-4" Style="background-color: var(--color-secondary-grey-container); border-radius: 0;">
    <MudContainer MaxWidth="MaxWidth.False">
        <div class="d-flex flex-column flex-md-row align-items-center px-4">
            <!-- Search Field -->
            <!-- Search Field -->
            <div style="flex: 4;">
                <div class="search-field search-input">
                    <span class="left-icon">
                        <MudIcon Icon="@Icons.Material.Filled.Search" />
                    </span>
                    <input id="search-input" type="text" placeholder="Search..." class="text-input"
                        @bind="searchText" />
                </div>
            </div>

            <!-- Category Dropdown (custom select already used here, assumed correct) -->
            <div style="flex: 2.2;">
                <NewCustomSelect TItem="CategoryItem" Items="@categoryOptions" SelectedId="@selectedCategory"
                    SelectedIdChanged="v => selectedCategory = v" GetLabel="x => x.Label" GetId="x => x.Id"
                    Label="Category" Placeholder="Choose" AriaLabel="Category Selection" Padding="18px 10px"
                    BorderRadius="0px" />

            </div>

            <!-- Search Button -->
            <div style="flex: 1.2;">
                <button type="button" @onclick="PerformSearch" disabled="@loading" class="search-button">
                    @if (loading)
                    {
                        <span>Loading...</span>
                    }
                    else
                    {
                        <span>Show Results</span>
                    }
                </button>
            </div>

        </div>
    </MudContainer>
</MudPaper>

<style>
    .search-field {
        display: flex;
        align-items: center;
        height: 56px;
        border: 1px solid #D0D5DD;
        border-radius: 5px;
        padding: 0 12px;
        background-color: white;
    }

    .text-input {
        flex: 1;
        border: none;
        outline: none;
        font-size: 16px;
        background: transparent;
    }

    .search-button {
        width: 100%;
        height: 56px;
        background-color: var(--color-accent);
        color: white;
        border: none;
        border-radius: 5px;
        font-size: 16px;
        cursor: pointer;
        text-transform: capitalize;
    }
</style>