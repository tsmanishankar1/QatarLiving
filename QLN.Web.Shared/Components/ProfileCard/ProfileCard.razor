@using MudBlazor
@inject NavigationManager Navigation

<MudPaper Class="profile-container mx-auto " Elevation="1" Style="max-width: 400px; background-color: white;">
    <MudGrid Justify="Justify.Center" Class="text-center" Style="gap: 0">
    <MudItem xs="12" Class="mb-0">  <!-- Reduced margin-bottom -->
        <MudAvatar Size="Size.Large" Class="responsive-avatar" Style="margin-bottom: 1px">  <!-- Custom small margin -->
            @if (string.IsNullOrEmpty(ProfileImageUrl))
            {
                <MudIcon Icon="@Icons.Material.Filled.AccountCircle" Size="Size.Large" Color="Color.Default" />
            }
            else
            {
                <img src="@ProfileImageUrl" class="responsive-avatar" />
            }
        </MudAvatar>
    </MudItem>

    <MudItem xs="12" Class="mb-0">  <!-- Reduced margin-bottom -->
        <MudText Typo="Typo.h6" Class="text-style" Style="margin-bottom: 1px">@Name</MudText>  <!-- Custom small margin -->
    </MudItem>

    @if (IsPremium)
    {
        <MudItem xs="12" Class="mb-0"> 
            <MudChip T="string"
                     Style="background-color: #e3f2fd; color: #1976d2; font-weight:600; margin-top: 1px"
                     Class="premium-chip">
                Premium User
            </MudChip>
        </MudItem>
    }
</MudGrid>


    <MudText Typo="Typo.subtitle2" Class="heading-style mb-2 px-4">Personal Information</MudText>

    <MudGrid Class="px-4">
        @foreach (var item in InfoItems)
        {
            @if (!string.IsNullOrEmpty(item.Value))
            {
                <MudItem xs="12" Class="d-flex align-items-start">
                    <MudText Class="label-text">@item.Key:</MudText>
                    <MudText Class="value-text">@item.Value</MudText>
                </MudItem>
            }
        }
    </MudGrid>

    <div class="text-center mt-4">
        <MudButton T="string" Variant="Variant.Filled"
                   Color="Color.Primary"
                   Class="edit-button"
                    OnClick="@(() => Navigation.NavigateTo("/edit-profile"))"
                   Style="background-color: #1976d2; text-transform: none; font-weight: 600;">
            Edit Profile
        </MudButton>
    </div>

    <MudDivider Class="my-4" />

    <MudText Typo="Typo.caption" Class="help-resources-title mb-2 mx-4">HELP RESOURCES</MudText>
    <MudList Dense="true" T="string" Class="mx-2">
        <MudListItem>
            <MudText T="string" Class="help-item">Help Center</MudText>
        </MudListItem>
        <MudListItem>
            <MudText T="string" Class="help-item">Contact Support</MudText>
        </MudListItem>
        <MudListItem>
            <MudText T="string" Class="help-item">Safety Tips</MudText>
        </MudListItem>
    </MudList>
</MudPaper>

<style>
    .profile-container {
        padding: 5px;
        border-radius: 10px;
        background-color: #f9fafb;
    }

    .responsive-avatar {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        object-fit: cover;
    }

    .text-style {
        font-size: 18px;
        font-weight: 700;
        font-family: 'Public Sans', sans-serif;
        color: #212121;
    }

    .heading-style {
        font-size: 16px;
        font-weight: 700;
        font-family: 'Public Sans', sans-serif;
        color: #333;
    }

    .label-text {
        width: 100px;
        font-weight: 500;
        color: #555;
        font-size: 12px;
        flex-shrink: 0;
    }

    .value-text {
        font-weight: 400;
        color: #1976d2;
        font-size: 12px;
        word-break: break-word;
        margin-left: 10px;
    }

    .edit-button {
        width: 180px;
        font-family: 'Public Sans', sans-serif;
    }

    .help-resources-title {
        color: #666;
        font-weight: 600;
        font-size: 14px;
    }

    .help-item {
        font-size: 14px;
        font-weight: 500;
        color: #333;
    }

    .premium-chip {
        font-family: 'Public Sans', sans-serif;
        font-size: 14px;
    }
</style>

@code {
    [Parameter] public string ProfileImageUrl { get; set; } = string.Empty;
    [Parameter] public string Name { get; set; } = string.Empty;
    [Parameter] public bool IsPremium { get; set; } = false;
    [Parameter] public string Email { get; set; } = string.Empty;
    [Parameter] public string Phone { get; set; } = string.Empty;
    [Parameter] public string Location { get; set; } = string.Empty;
    [Parameter] public string Gender { get; set; } = string.Empty;
    [Parameter] public string Nationality { get; set; } = string.Empty;
    [Parameter] public List<string> Languages { get; set; } = new();

    [Parameter] public EventCallback OnEditClicked { get; set; }

    private Dictionary<string, string> InfoItems => new()
    {
        { "Email", Email },
        { "Phone", Phone },
        { "Location", Location },
        { "Gender", Gender },
        { "Nationality", Nationality },
        { "Languages", string.Join(", ", Languages) }
    };
}
