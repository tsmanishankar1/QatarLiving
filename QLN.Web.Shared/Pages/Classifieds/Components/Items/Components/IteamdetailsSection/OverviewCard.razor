@using QLN.Web.Shared.Models
@using MudBlazor

<MudPaper Class="pa-4" Elevation="0" Style="background-color:#f7f8fa;">
    <MudText Typo="Typo.h6" Class="mb-4 overview-heading">Overview</MudText>

    <MudGrid GutterSize="16px">
        @foreach (var item in OverviewData)
        {
            <MudItem xs="12" sm="6" md="4">
                <MudPaper Class="custom-mudpaper" Elevation="0">
                    <img src="@item.Icon" class="icon-img" />
                    <MudText Class="overview-text">@item.Label</MudText>
                </MudPaper>
            </MudItem>
        }
    </MudGrid>
</MudPaper>

@code {
    [Parameter]
    public PromotedItem? Item { get; set; }

    private record OverviewItem(string Icon, string Label);
    private List<OverviewItem> OverviewData = new();

    protected override void OnParametersSet()
    {
        if (Item == null)
        {
            OverviewData.Clear();
            return;
        }
    string Fallback(string value, string fallback) => string.IsNullOrWhiteSpace(value) ? fallback : value;
        OverviewData = new()
{
 new("/images/classifieds/brand_icons.svg", $"Brand: {Fallback(Item.Brand, "Not specified")}"),
            new("/images/classifieds/model_icons.svg", $"Model: {Fallback(Item.Model, "Unknown")}"),
            new("/images/classifieds/colour_icon.svg", $"Colour: {Fallback(Item.Colour, "N/A")}"),
            new("/images/classifieds/storage_icon.svg", $"Storage: {Fallback(Item.Storage, "N/A")}"),
            new("/images/classifieds/battery_icons.svg", $"Battery: {(Item.BatteryPercentage > 0 ? $"{Item.BatteryPercentage}%" : "Unknown")}"),
            new("/images/classifieds/chip_icons.svg", $"Chip: {Fallback(Item.Processor, "Not mentioned")}"),
            new("/images/classifieds/wireless_icon.svg", "Wireless Charging"), // Keep static unless logic exists
            new("/images/classifieds/warranty_icon.svg", $"Warranty: {Fallback(Item.Coverage, "No Warranty")}")
};
    }
}


<style>
    .custom-mudpaper {
        display: flex;
        align-items: center;
        gap: 12px;
        background: white;
        padding: 16px !important;
        border-radius: 8px;
    }

    .icon-img {
        width: 24px;
        height: 24px;
        object-fit: contain;
    }

    .overview-text {
        font-family: 'Public Sans', sans-serif !important;
        font-size: 14px !important;
        font-weight: 600 !important;
        color: var(--color-text-heading) !important;
    }

    .overview-heading {
        font-family: 'Public Sans', sans-serif !important;
        font-size: 25px !important;
        font-weight: 600 !important;
        color: var(--color-text-heading) !important;
    }
</style>
