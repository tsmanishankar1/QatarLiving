@using QLN.Web.Shared.Components.Classifieds.StoreCard
@using QLN.Web.Shared.Components.PaginationFooter
@using MudBlazor
@using QLN.Web.Shared.Components.BreadCrumb

<Breadcrumb Items="breadcrumbItems" />
<MudContainer MaxWidth="MaxWidth.ExtraLarge">
    <MudGrid GutterSize="3">
        @foreach (var store in stores)
        {
            <MudItem xs="12" sm="6" md="2">
                <StoreCard StoreData="store" OnShopNow="HandleShopNow" />
            </MudItem>
        }
    </MudGrid>
    <!-- Pagination -->
    <PaginationFooter TotalItems="stores.Count" CurrentPage="currentPage" PageSize="pageSize"
        OnPageChange="HandlePageChange" OnPageSizeChange="HandlePageSizeChange" />

</MudContainer>
@code {
    private List<QLN.Web.Shared.Components.BreadCrumb.BreadcrumbItem> breadcrumbItems = new();
    private int currentPage = 1;
    private int pageSize = 12;

    private void HandlePageChange(int newPage)
    {
        currentPage = newPage;
    }

    private void HandlePageSizeChange(int newSize)
    {
        pageSize = newSize;
    }

    protected override void OnInitialized()
    {
        breadcrumbItems = new()
{
new() { Label = "Classifieds",Url ="classifieds" },

new() { Label = "Store", Url = "/Store", IsLast = true },
};

    }
    private List<StoreCard.StoreItem> stores = new()
{
new() { StoreName = "AIRBNB", LogoUrl = "qln-images/stores/vector.svg", ItemCount = 2152 },
new() { StoreName = "Starlink", LogoUrl = "qln-images/stores/starlink.svg", ItemCount = 2152 },
new() { StoreName = "MICROSOFT", LogoUrl = "qln-images/stores/microsoft.svg", ItemCount = 2152 },
new() { StoreName = "Lulu Hypermarket", LogoUrl = "qln-images/stores/hypermarket.svg", ItemCount = 2152 },
new() { StoreName = "City Hypermarket", LogoUrl = "qln-images/stores/hypermarket_city.svg", ItemCount = 1845 },
new() { StoreName = "Al Meera", LogoUrl = "qln-images/stores/meera.svg", ItemCount = 3021 },
new() { StoreName = "MICROSOFT", LogoUrl = "qln-images/stores/microsoft.svg", ItemCount = 2152 },
new() { StoreName = "Lulu Hypermarket", LogoUrl = "qln-images/stores/hypermarket.svg", ItemCount = 2152 },
new() { StoreName = "AIRBNB", LogoUrl = "qln-images/stores/vector.svg", ItemCount = 2152 },
new() { StoreName = "Starlink", LogoUrl = "qln-images/stores/starlink.svg", ItemCount = 2152 },
new() { StoreName = "Al Meera", LogoUrl = "qln-images/stores/meera.svg", ItemCount = 3021 },
new() { StoreName = "MICROSOFT", LogoUrl = "qln-images/stores/microsoft.svg", ItemCount = 2152 }
};

    private void HandleShopNow(StoreCard.StoreItem store)
    {
        Console.WriteLine($"Shop Now clicked for {store.StoreName}");
    }
}
