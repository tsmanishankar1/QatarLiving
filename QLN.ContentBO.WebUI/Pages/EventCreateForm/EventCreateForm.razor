@page "/content/events/create"
@inherits EventCreateFormBase;
<MudGrid>
    <!-- Left Form Section -->
    <MudItem xs="12" md="6">
        <MudPaper Class="pa-4" Elevation="0">
            <MudText Class="form-title">Event Form</MudText>
            <MudSelect Variant="Variant.Outlined" T="string" Label="Category" @bind-Value="@Category" Class="my-2">
            @foreach (var category in Categories)
            {
                <MudSelectItem Value="@category">@category</MudSelectItem>
            }
            </MudSelect>
            <MudTextField Variant="Variant.Outlined" Label="Event Title" Class="my-2" @bind-Value="@EventTitle" />
            <MudRadioGroup T="string" @bind-SelectedOption="@AccessType" Class="my-2">
            <MudRadio T="string" Option="Free Access">Free Access</MudRadio>
            <MudRadio T="string" Option="Open Registrations">Open Registrations</MudRadio>
            <MudRadio T="string" Option="Fees">Fees</MudRadio>
            </MudRadioGroup>
            <MudTextField  Variant="Variant.Outlined" Label="Price" Class="my-2" @bind-Value="@Price" Adornment="Adornment.End" AdornmentText="QAR" />
            <MudTextField  Variant="Variant.Outlined" Placeholder="Redirection Link" Class="my-2" @bind-Value="@RedirectionLink"/>
            <MudTextField  Variant="Variant.Outlined" Label="Location" Class="my-2" @bind-Value="@Location"
            Adornment="Adornment.End"
            AdornmentIcon="@Icons.Material.Filled.LocationOn"/>
            <MudTextField  Variant="Variant.Outlined" Label="Venu" Class="my-2" @bind-Value="@Venue" />
            <iframe
            frameborder="0"
            scrolling="no"
            marginheight="0"
            marginwidth="0"
            class="map-frame"
            style="width: 100%; height: 220px;"
            src="https://www.openstreetmap.org/export/embed.html?bbox=@EventLong,@EventLat,@EventLong,@EventLat&layer=mapnik&marker=@EventLat,@EventLong">
            </iframe>
            <MudDatePicker  Variant="Variant.Outlined" Label="Date" Class="my-2" @bind-Date="@EventDate" />
            <MudRadioGroup T="string" @bind-SelectedOption="@AccessType" Class="my-2">
            <MudRadio T="string" Option="Free Access">Generic</MudRadio>
            <MudRadio T="string" Option="Open Registrations">Specific Time</MudRadio>
            </MudRadioGroup>
            <MudTimePicker Variant="Variant.Outlined" Label="Time" Class="my-2" @bind-Time="@EventTime" />
            <MudExRichTextEdit @ref="@Editor"
                                   Height="444"
                                   Class="m-2"
                                   Placeholder="Start Typing">
            </MudExRichTextEdit>
            <MudStack Row Class="mt-4" Justify="Justify.SpaceBetween">
                <MudButton FullWidth=true Variant="Variant.Outlined" Class="custom-close">Cancel</MudButton>
                <MudButton FullWidth=true Variant="Variant.Filled"   Class="custom-add" OnClick="@OpenDialogAsync">Save</MudButton>
            </MudStack>

        </MudPaper>
    </MudItem>

    <!-- Right Cover Image Section -->
    <MudItem xs="12" md="6">
    <MudPaper Class="pa-4" Elevation="0">
        <MudText Class="mb-2 form-title">Cover Image</MudText>
        <MudPaper Outlined Class="d-flex align-center justify-center pa-2">
            <div class="d-flex flex-column align-center justify-center text-center" style="width: 100%; height: 100%;">
                 @if (uploadedImage is null)
                {
                        <MudFileUpload T="IBrowserFile"
                        Accept=".png,.jpg"
                        FilesChanged="@(async f => await UploadFiles(f))"
                        MaximumFileCount="1">
                        <ActivatorContent>
                        <MudIcon Color="Color.Warning" Icon="@Icons.Material.Filled.CloudUpload" Size="Size.Large" />
                        <div class="mt-1" style="color: #FF7F38;">Cover Image</div>
                        </ActivatorContent>
                        </MudFileUpload>
                }
                else
                {
                        <img src="@uploadedImage" alt="Cover" style="max-height: 150px; max-width: 100%; border-radius: 8px;" />
                        <div class="mt-2 d-flex justify-center gap-2">
                        <MudButton Variant="Variant.Outlined" Color="Color.Primary" Size="Size.Small" OnClick="@EditImage">
                            Edit
                        </MudButton>
                        <MudButton Variant="Variant.Outlined" Color="Color.Error" Size="Size.Small" OnClick="@DeleteImage">
                        Delete
                        </MudButton>
                    </div> 
                }
            </div>
        </MudPaper>
    </MudPaper>
</MudItem>
</MudGrid>



<style>
    .form-title{
        font-family: 'Public Sans', sans-serif;
        font-size: 18px;
        font-weight: 600;
        color: #00426D;
        text-transform: none;
    }
    .custom-add {
        background-color: #FF7F38;
        font-family: 'Public Sans', sans-serif;
        font-size: 16px;
        font-weight: 600;
        color: white;
        text-transform: none;
    }
    .custom-close {
        border-color: #D5D7DA;
        color: #242424;
        text-transform: none;
    }
</style>

