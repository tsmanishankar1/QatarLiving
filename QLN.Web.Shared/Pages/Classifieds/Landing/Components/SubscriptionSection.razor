@using QLN.Common.DTO_s
@using QLN.Web.Shared.Components.SubscriptionCard
@inject NavigationManager Navigation
@using QLN.Web.Shared.Components.EmptyCard

@if (Loading)
{
    <MudSkeleton Height="200px" Width="100%" />
}
else if (Data is null)
{
    <EmptyCard Title="No subscription items found." Subtitle="Please check back later or explore other categories." />
}
else
{
    <SubscriptionCard
        Heading="@Data.Title"
        Description="@Data.Description"
        ButtonText="Subscribe Now"
        ImageSrc="@Data.ImageUrl"
        OnClick="@(() => HandleClick(Data.RediectUrl))" />
}

@code {
    [Parameter] public LandingBackOfficeIndex? Data { get; set; }
    [Parameter] public bool Loading { get; set; }

    private void HandleClick(string? url)
    {
        if (!string.IsNullOrWhiteSpace(url))
        {
            if (!url.StartsWith("http"))
                url = $"https://{url}";

            Navigation.NavigateTo(url!, forceLoad: true);
        }
    }
}
