@using QLN.Web.Shared.Components.MoreFilters
@using QLN.Common.DTO_s;
<MoreFilters Selection="@modelSelection" OnApply="ApplyFilters" OnReset="ResetFilters">
    <div class="filter-section">
        <label class="section-label">Model</label>
        @foreach (var model in PopularModels)
        {
            <label class="checkbox-item">
                 <MudCheckBox @bind-Value="@modelSelection[model]"
                     Color="Color.Primary"
                     UncheckedColor="Color.Default"
                     Class="mb-1" />
                @model
            </label>
        }
    </div>
</MoreFilters>

@code {
    private Dictionary<string, bool> modelSelection = new();
 protected List<CategoryField> CategoryFilters => SearchState.ItemCategoryFilters;
    [Inject] protected SearchStateService SearchState { get; set; }
    private List<string> PopularModels = new() { "iPhone 16 Pro Max", "iPhone 15 Pro Max" };

    protected override void OnInitialized()
    {
        foreach (var item in PopularModels)
            modelSelection[item] = false;
    }

    private Task ApplyFilters()
    {
        Console.WriteLine("Filters applied.");
        return Task.CompletedTask;
    }

    private Task ResetFilters()
    {
        Console.WriteLine("Filters reset.");
        return Task.CompletedTask;
    }
}

