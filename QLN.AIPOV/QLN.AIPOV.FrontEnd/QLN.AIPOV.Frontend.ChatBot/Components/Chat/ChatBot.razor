<div class="chat-container">
    <div class="header-area">
        <MudText Typo="Typo.h6" Class="mud-text-secondary py-1">Chat Bot</MudText>
        <MudIconButton Icon="@Icons.Material.Filled.Refresh" 
                       Color="Color.Secondary" 
                       OnClick="ClearConversation"
                       Size="Size.Small"
                       Title="New Conversation" />
    </div>

    <div class="messages-area">
        <MessageList Messages="Messages"/>
    </div>

    <div class="input-area">
        @if (_isLoading)
        {
            <MudProgressLinear Indeterminate="true" Color="Color.Primary" Class="my-2"/>
        }
        <MessageInput OnSend="SendMessageAsync" DisableChatInput="_isLoading"/>
    </div>
</div>

<style>
    .chat-container {
        display: flex;
        flex-direction: column;
        height: calc(100vh - 4.55rem);
        position: relative;
        overflow: hidden;
    }

    .header-area {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5rem 1rem;
        border-bottom: 1px solid rgba(0,0,0,0.05);
    }

    .messages-area {
        flex: 1;
        overflow-y: auto;
        padding: 1rem;
        margin-bottom: 70px; /* Make space for the input area */
        scrollbar-width: thin; /* For Firefox */
        scrollbar-color: #9e9e9e #f5f5f5; /* For Firefox */
    }

        /* WebKit scrollbar styling */
        .messages-area::-webkit-scrollbar {
            width: 6px;
        }

        .messages-area::-webkit-scrollbar-track {
            background: #f5f5f5;
        }

        .messages-area::-webkit-scrollbar-thumb {
            background-color: #9e9e9e;
            border-radius: 6px;
        }

    .input-area {
        position: absolute; /* Changed from fixed to absolute */
        bottom: 0;
        left: 0;
        right: 0;
        padding: 1rem;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        z-index: 10;
    }
</style>