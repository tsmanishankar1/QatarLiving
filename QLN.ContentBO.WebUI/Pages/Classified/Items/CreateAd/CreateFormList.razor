@page "/create-form"
@inherits CreateFormListBase

<EditForm Model="Ad" OnValidSubmit="SubmitForm">
    <DataAnnotationsValidator />

    <div>
        <h3 class="form-heading-f1">Ad Form</h3>
        <h4 class="form-heading-f2">User can edit this ad in their dashboard</h4>
        <div class="user-email-display">
            <span>@UserEmail</span>
        </div>
        <h3 class="form-heading">Ad Information</h3>

        <MudTextField Class="white-bg" Variant="Variant.Outlined" T="string" Label="Title"
                      @bind-Value="Ad.Title" For="@(() => Ad.Title)" FullWidth="true" />

        <MudTextField Class="white-bg" Variant="Variant.Outlined" T="int" Label="Price"
                      @bind-Value="Ad.Price" For="@(() => Ad.Price)" FullWidth="true" />

        @foreach (var field in FieldOptions)
        {
            <MudSelect Class="white-bg" T="string" Variant="Variant.Outlined" Label="@field.Key" FullWidth="true">
                @foreach (var option in field.Value)
                {
                    <MudSelectItem T="string" Value="@option">@option</MudSelectItem>
                }
            </MudSelect>
        }

        <MudTextField Class="white-bg" Variant="Variant.Outlined" T="string" Label="Certificate"
                      @bind-Value="Ad.Certificate" For="@(() => Ad.Certificate)" FullWidth="true" />

        <MudTextField Class="white-bg" Variant="Variant.Outlined" T="int" Label="Battery %"
                      @bind-Value="Ad.BatteryPercentage" For="@(() => Ad.BatteryPercentage)" FullWidth="true" />

        <h3 class="form-heading">Description and Features</h3>

        <MudExRichTextEdit @bind-Value="Ad.ItemDescription" @ref="Editor"
                           Height="350" Placeholder="Start Typing"
                           For="@(() => Ad.ItemDescription)">
        </MudExRichTextEdit>

        <MudTextField Class="white-bg" Variant="Variant.Outlined" T="string" Label="XML Link"
                      @bind-Value="Ad.XmlLink" For="@(() => Ad.XmlLink)" FullWidth="true" />

        <h3 class="form-heading">Contact Details</h3>

        <MudTextField Class="white-bg" Variant="Variant.Outlined" T="string" Label="Phone Code"
                      @bind-Value="Ad.PhoneCode" For="@(() => Ad.PhoneCode)" FullWidth="true" />

        <MudTextField Class="white-bg" Variant="Variant.Outlined" T="string" Label="Phone Number"
                      @bind-Value="Ad.PhoneNumber" For="@(() => Ad.PhoneNumber)" FullWidth="true" />

        <MudTextField Class="white-bg" Variant="Variant.Outlined" T="string" Label="WhatsApp Code"
                      @bind-Value="Ad.WhatsappCode" For="@(() => Ad.WhatsappCode)" FullWidth="true" />

        <MudTextField Class="white-bg" Variant="Variant.Outlined" T="string" Label="WhatsApp Number"
                      @bind-Value="Ad.WhatsappNumber" For="@(() => Ad.WhatsappNumber)" FullWidth="true" />

        <h3 class="form-heading">Location</h3>

        <MudTextField Class="white-bg" Variant="Variant.Outlined" T="string" Label="Zone"
                      @bind-Value="Ad.Zone" For="@(() => Ad.Zone)" FullWidth="true" />

        <MudTextField Class="white-bg" Variant="Variant.Outlined" T="int?" Label="Street Number"
                      @bind-Value="Ad.StreetNumber" For="@(() => Ad.StreetNumber)" FullWidth="true" />

        <MudTextField Class="white-bg" Variant="Variant.Outlined" T="int?" Label="Building Number"
                      @bind-Value="Ad.BuildingNumber" For="@(() => Ad.BuildingNumber)" FullWidth="true" />

        <div id="map" style="height: 300px; width: 100%;"></div>

        <MudCheckBox Color="Color.Primary" T="bool" Label="I agree to terms"
                      @bind-Value="Ad.IsAgreed" For="@(() => Ad.IsAgreed)" />

        <MudStack Row Justify="Justify.SpaceBetween" Class="mt-4">
            <MudButton Variant="Variant.Outlined" Color="Color.Secondary">Cancel</MudButton>
            <MudButton Variant="Variant.Filled" Color="Color.Primary" ButtonType="ButtonType.Submit">Submit</MudButton>
        </MudStack>
    </div>
</EditForm>

<style>
    .form-heading {
        color: var(--color-primary);
        font-size: 18px;
        padding: 10px 0;
        font-weight: 600;
    }

    .white-bg input,
    .white-bg textarea,
    .white-bg .mud-input,
    .white-bg .mud-select,
    .white-bg .mud-select-input,
    .white-bg .mud-input-slot {
        background-color: white !important;
    }
    .user-email-display{
        padding: 10px 18px;
        border-radius: 6px;
        background-color: #F2F4F7;
    }
    .user-email-display span {
        font-weight: 600;   
        font-size: 16px;          
        color: #98A2B3;       
    }
    .form-heading-f1 {
        color: var(--color-primary);
        font-size: 20px;
        padding: 0 0 5px 0;
        font-weight: 600;
    }
    .form-heading-f2 {
        color: var( --color-text-heading);
        font-size: 12px;
        padding: 0 0 5px 0;
        font-weight: 500;
    }
</style>
