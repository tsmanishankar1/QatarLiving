@page "/manage/news/addarticle"
@inherits AddArticleBase

<MudContainer MaxWidth="MaxWidth.False">
<EditForm Model="@article" OnValidSubmit="HandleValidSubmit">
    <MudPaper Class="p-6" Style="border: 1px solid #E0E0E0; border-radius: 8px;">
        <MudGrid GutterSize="24px">
            <!-- Left Column -->
            <MudItem xs="12" md="7">
                <MudText Typo="Typo.h6" Class="mb-4">Article Form</MudText>

                <MudGrid GutterSize="16px">
                    <MudItem xs="4">
                        <MudSelect T="string" Label="Category" Dense @bind-Value="article.CategoryName" Class="w-100">
                            @foreach (var item in Categories)
                            {
                                <MudSelectItem Value="@item">@item</MudSelectItem>
                            }
                        </MudSelect>
                    </MudItem>

                    <MudItem xs="4">
                        <MudSelect T="string" Label="Subcategory" Dense @bind-Value="article.CategoryName" Class="w-100">
                            @foreach (var item in Subcategories)
                            {
                                <MudSelectItem Value="@item">@item</MudSelectItem>
                            }
                        </MudSelect>
                    </MudItem>

                    <MudItem xs="3">
                        <MudSelect T="string" Label="Slot" Dense @bind-Value="article.authorName" Class="w-100">
                            @foreach (var item in Slots)
                            {
                                <MudSelectItem Value="@item">@item</MudSelectItem>
                            }
                        </MudSelect>
                    </MudItem>

                    <MudItem xs="1" Class="d-flex align-center">
                        <MudIconButton Icon="@Icons.Material.Filled.Add" Color="Color.Primary" Size="Size.Medium" />
                    </MudItem>
                </MudGrid>

                <MudSelect Label="Writer" Dense Class="mt-4 w-100" @bind-Value="article.WriterTag">
                    @foreach (var item in Writers)
                    {
                        <MudSelectItem Value="@item">@item</MudSelectItem>
                    }
                </MudSelect>

                <MudTextField Label="Article Title" Dense Class="mt-4 w-100" @bind-Value="article.title" />

                <MudText Typo="Typo.body2" Class="mt-4 mb-1">Article content</MudText>
                    <MudExRichTextEdit @ref="@Editor"
                                       Height="444"
                                       Class="m-2"
                                       Placeholder="Edit html">

                    </MudExRichTextEdit>
                <MudText Typo="Typo.caption" Class="mt-2">Start Typing</MudText>

                <MudStack Row Class="mt-6">
                    <MudButton Variant="Variant.Outlined" Color="Color.Default" OnClick="@Cancel">Cancel</MudButton>
                    <MudButton Type="Submit" Color="Color.Primary" Class="ml-2">Save</MudButton>
                </MudStack>
            </MudItem>

            <!-- Right Column -->
            <MudItem xs="12" md="5">
                <MudText Typo="Typo.h6" Class="mb-4">Images</MudText>

                <!-- Cover Image Upload -->
                <MudPaper Class="pa-6 d-flex flex-column align-center justify-center" Style="min-height: 200px; border: 1px dashed #ccc; cursor: pointer;" OnClick="TriggerCoverUpload">
                    <MudIcon Icon="@Icons.Material.Filled.CloudUpload" Size="Size.Large" Color="Color.Primary" />
                    <div class="mt-2" style="color: #ff5722;">Cover Image</div>
                    <MudText Typo="Typo.caption" Class="mt-2">Recommended image size: 1600 x 900 pixels</MudText>
                </MudPaper>
                <InputFile id="cover-upload" OnChange="HandleCoverImageChange" style="display:none" />

                <!-- Inline Images Upload -->
                <MudButton Class="mt-6" Color="Color.Primary" OnClick="TriggerInlineImageUpload">
                    Upload Inline Images
                </MudButton>
                <InputFile id="inline-upload" OnChange="HandleInlineImagesChange" multiple style="display:none" />
            </MudItem>
        </MudGrid>
    </MudPaper>
</EditForm>
</MudContainer>

