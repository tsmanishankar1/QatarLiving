@inherits AddSeasonPickModalBase
@using MudBlazor

<MudDialog MaxWidth="MaxWidth.Small" FullWidth="true">
    <DialogContent>
        <div class="classified-modal">

            <!-- Icon -->
            <div class="d-flex justify-center">
                <img src="/qln-images/plus_icon.svg" alt="plus" />
            </div>

            <!-- Title -->
            <div class="d-flex justify-center">
                <MudText Typo="Typo.h6" Align="Align.Center" Class="font-weight-bold">
                    @Title
                </MudText>
            </div>

            <!-- Category -->
            <div class="mx-auto">
                <MudSelect T="string" Label="Category" 
                           @bind-Value="SelectedCategory"
                           Class="classified-field no-underline"
                           Required="true" RequiredError="Category is required">
                    <MudSelectItem T="string" Value=null>Choose</MudSelectItem>
                    @foreach (var category in Categories)
                    {
                        <MudSelectItem T="string" Value="@category">@category</MudSelectItem>
                    }
                </MudSelect>
            </div>

            <!-- Subcategory -->
            <div class="mx-auto">
                <MudSelect T="string" Label="Subcategory" 
                           @bind-Value="SelectedSubcategory "
                           Disabled="@string.IsNullOrEmpty(SelectedCategory)"
                           Class="classified-field no-underline"
                           Required="true" RequiredError="Subcategory is required">
                    <MudSelectItem T="string" Value=null>Choose</MudSelectItem>
                    @foreach (var sub in GetSubcategories(SelectedCategory))
                    {
                        <MudSelectItem T="string" Value="@sub">@sub</MudSelectItem>
                    }
                </MudSelect>
            </div>

            <!-- Section -->
            <div class="mx-auto">
                <MudSelect T="string" Label="Section" 
                           @bind-Value="SelectedSection"
                           Disabled="@string.IsNullOrEmpty(SelectedSubcategory)"
                           Class="classified-field no-underline"
                           Required="true" RequiredError="Section is required">
                    <MudSelectItem T="string" Value=null>Choose</MudSelectItem>
                    @foreach (var sec in GetSections(SelectedSubcategory))
                    {
                        <MudSelectItem T="string" Value="@sec">@sec</MudSelectItem>
                    }
                </MudSelect>
            </div>

            <!-- Image Upload -->
            <div class="mx-auto">
                <MudPaper Elevation="0" Class="classified-image-container mt-2">
                    @if (!string.IsNullOrEmpty(ImagePreviewUrl))
                    {
                        <img src="@ImagePreviewUrl" style="max-width: 100%; max-height: 200px;" />
                        <MudButton Variant="Variant.Text" Color="Color.Error" OnClick="() => ImagePreviewUrl = null" Class="mt-2">
                            Remove Image
                        </MudButton>
                    }
                    else
                    {
                        <img src="/qln-images/upload_icon.svg" alt="upload"/>
                        <MudText Typo="Typo.subtitle2" Color="Color.Warning">Image</MudText>
                        <MudButton Variant="Variant.Text">
                            Upload
                        </MudButton>
                        <input type="file" @ref="fileInput" style="display: none;" accept="image/*" />
                    }
                </MudPaper>
                <MudText Typo="Typo.caption" Align="Align.Center" Class="mt-1">Recommended image size: 330 x 200 pixels</MudText>
            </div>

            <!-- Footer Buttons -->
            <div class=" classified-button-wrappermx-auto mt-2">
                <MudButton Color="Color.Primary" OnClick="Save" Disabled="@(!IsFormValid())" Class="classified-button">
                    Add
                </MudButton>
                <MudButton Variant="Variant.Outlined" Color="Color.Inherit" OnClick="Close" Class="classified-button mt-2">
                    Close
                </MudButton>
               
            </div>

        </div>
    </DialogContent>
</MudDialog>



<style>
    /* Main modal container */
    .classified-modal {
        width: 400px;
        height: 727px;
        border-radius: 12px;
        padding: 24px;
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    /* Dropdowns and Inputs */
    .classified-field {
        width: 330px;
        height: 60px;
        border-radius: 6px;
        border: 1px solid #D0D5DD;
        justify-content: space-between;
        padding-left:10px;
    }

    /* Image upload container */
    .classified-image-container {
        width: 330px;
        height: 225px;
        border: 1px dashed #ccc;
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }
    .classified-button-wrapper{
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
    }
    /* Buttons */
    .classified-button {
        width: 330px;
        height: 46px;
        border-radius: 6px;
        gap: 8px;
        border: 1px solid #D0D5DD;
    }

    .no-underline .mud-input-underline::before,
    .no-underline .mud-input-underline::after {
        border-bottom: none !important;
    }

</style>